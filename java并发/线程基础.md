# 线程基础<br>
---
## 进程与线程
### 进程
进程是程序的一次的执行过程，系统运行程序的基本单位。
### 线程
线程是比进程更小的执行单位，共享进程的**堆，方法区**，每个线程私有自己的**程序计数器，虚拟机栈，本地方法栈**。

线程与进程的关系：
![进程与线程的关系](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/jvm/java-runtime-data-areas-jdk1.8.png)

**总结： 线程是进程划分成的更小的运行单位。线程和进程最大的不同在于基本上各进程是独立的，而各线程则不一定，因为同一进程中的线程极有可能会相互影响。线程执行开销小，但不利于资源的管理和保护；而进程正相反。**
### 程序计数器为什么私有？
* 字节码解释器通过改变程序计数器来实现代码的流程控制，如：选择，循环，顺序执行，异常处理。
* 在多线程情况下，程序计数器用来记录代码执行位置，从而当线程切换回来的时候知道该线程上一次执行到的位置。
> **所以私有程序计数器是为了，线程切换后能恢复到正确的位置**

### 虚拟机栈和本地方法栈为什么私有？
* 虚拟机栈：方法执行会创建栈帧，主要存放方法的**局部变量表，操作数栈，动态链接，返回地址，常量池引用**。方法的调用到执行完成，对应着栈帧在虚拟机栈中的入栈和出栈过程。
* 本地方法栈：与虚拟机栈类似，虚拟机栈运行Java方法，本地方法栈运行native方法
> **所以为了保证线程中的局部变量不被别的线程访问到，虚拟机栈和本地方法栈是线程私有的。**
